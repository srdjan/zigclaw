# zigclaw.toml
config_version = 1

[capabilities]
active_preset = "dev"

[capabilities.presets.readonly]
tools = ["echo"]
allow_network = false
allow_write_paths = []

[capabilities.presets.dev]
tools = ["echo", "fs_read"]
allow_network = true
allow_write_paths = ["./.zigclaw", "./tmp"]

[attestation]
enabled = false

[replay]
enabled = false

[security]
workspace_root = "."
max_request_bytes = 262144

[gateway]
rate_limit_enabled = false
rate_limit_store = "memory"
rate_limit_window_ms = 1000
rate_limit_max_requests = 60
rate_limit_dir = "./.zigclaw/gateway_rate_limit"

[providers.primary]
kind = "openai_compat"       # "stub" | "openai_compat"
model = "gpt-4.1-mini"
temperature = 0.2
base_url = "https://api.openai.com/v1"
api_key_env = "OPENAI_API_KEY"

[providers.fixtures]
mode = "off"                 # "off" | "record" | "replay" | "capsule_replay"
dir = "./.zigclaw/fixtures"
capsule_path = ""

[providers.reliable]
retries = 0
backoff_ms = 250

[memory]
backend = "markdown"
root = "./.zigclaw/memory"

[tools]
wasmtime_path = "wasmtime"
plugin_dir = "./zig-out/bin"

[tools.registry]
strict = false

[queue]
dir = "./.zigclaw/queue"
poll_ms = 1000
max_retries = 2
retry_backoff_ms = 500
retry_jitter_pct = 20

[observability]
enabled = true
dir = "./.zigclaw/logs"
max_file_bytes = 1048576
max_files = 5

[logging]
enabled = true
dir = "./.zigclaw"
file = "decisions.jsonl"
max_file_bytes = 1048576
max_files = 5
