config_version = 1
vault_path = "./.zigclaw/vault.enc"

[capabilities]
active_preset = "dev"

[capabilities.presets.dev]
tools = ["echo", "fs_read"]
allow_network = true
allow_write_paths = ["./.zigclaw", "./tmp"]

[capabilities.presets.readonly]
tools = ["echo"]
allow_network = false
allow_write_paths = []

[observability]
enabled = true
dir = "./.zigclaw/logs"
max_file_bytes = 1048576
max_files = 5

[logging]
enabled = true
dir = "./.zigclaw"
file = "decisions.jsonl"
max_file_bytes = 1048576
max_files = 5

[attestation]
enabled = false

[replay]
enabled = false

[gateway]
rate_limit_enabled = false
rate_limit_store = "memory"
rate_limit_window_ms = 1000
rate_limit_max_requests = 60
rate_limit_dir = "./.zigclaw/gateway_rate_limit"

[security]
workspace_root = "."
max_request_bytes = 262144

[providers.primary]
kind = "openai_compat" # "stub" | "openai_compat"
model = "gpt-4.1-mini"
temperature = 0.2
base_url = "https://api.openai.com/v1"
api_key_env = "OPENAI_API_KEY"

[providers.fixtures]
mode = "off" # "off" | "record" | "replay" | "capsule_replay"
dir = "./.zigclaw/fixtures"
capsule_path = ""

[providers.reliable]
retries = 0
backoff_ms = 250

[memory]
backend = "markdown"
root = "./.zigclaw/memory"

[memory.primitives]
enabled = true
templates_dir = "./.zigclaw/memory/templates"
strict_schema = true

[tools]
wasmtime_path = "wasmtime"
plugin_dir = "./zig-out/bin"

[tools.registry]
strict = false

[queue]
dir = "./.zigclaw/queue"
poll_ms = 1000
max_retries = 2
retry_backoff_ms = 500
retry_jitter_pct = 20

[automation]
task_pickup_enabled = false
default_owner = "zigclaw"
pickup_statuses = ["open"]

[persistence.git]
enabled = false
repo_dir = "."
author_name = "zigclaw"
author_email = "zigclaw@local"
default_branch = "main"
allow_paths = ["./.zigclaw/memory/tasks", "./.zigclaw/memory/projects", "./.zigclaw/memory/decisions", "./.zigclaw/memory/lessons", "./.zigclaw/memory/people", "./.zigclaw/memory/templates"]
deny_paths = ["./.zigclaw/queue", "./.zigclaw/logs", "./.zigclaw/gateway.token", "./.zig-cache", "./zig-out"]
push_default = false
remote_name = "origin"
